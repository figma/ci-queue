#!/usr/bin/env ruby

def run(*args)
  puts "$ #{args.join(' ')}"
  unless system(*args)
    exit $?.exitstatus
  end
end

case ENV['SUITE']
when 'python'
  Dir.chdir('python/') do
    run('python3', '-m', 'pip', '--version')
    run('python3', '-m', 'pip', 'install', '-U', 'pip')
    run('python3', '-m', 'pip', 'install', 'setuptools==68.0.0')
    run('python3', '-m', 'pip', '--version')
    run('make', 'install')
    run('ls', '-l', 'myenv/bin/')
  end
when 'ruby'
else
  abort("Missing or invalid SUITE environment variable")
end
